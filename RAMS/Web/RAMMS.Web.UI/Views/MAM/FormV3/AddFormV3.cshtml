@model RAMMS.Web.UI.Models.FormV3Model;
@using RAMMS.Business.ServiceProvider;
@inject RAMMS.Business.ServiceProvider.Interfaces.ISecurity security;
@{
    ViewBag.TabTitle = "MAM";
    ViewData["Title"] = "MAM";
    Layout = "~/Views/Shared/_PortalLayout.cshtml";

    bool isSubmit = (security.IsJKRSHQ || security.IsDivisonalEngg || security.IsJKRSSuperiorOfficer || security.isOperRAMSExecutive || security.IsExecutive || security.IsHeadMaintenance || security.IsRegionManager);
    bool IsApproved = (security.isOperRAMSExecutive || security.IsExecutive || security.IsHeadMaintenance || security.IsRegionManager);
    var groupname = security.Group.IndexOf(",") >= 0 ? security.Group.Split(',')[0] : security.Group;

}
<link href="~/js/jquery.timeentry/jquery.timeentry.css" rel="stylesheet">
<script src="~/js/jquery.timeentry/jquery.plugin.js"></script>
<script src="~/js/jquery.timeentry/jquery.timeentry.js"></script>
<script src="~/js/FormV3.js"></script>


@using (Html.BeginForm())
{

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">

                <div class="d-flex justify-content-center pt-3 pb-3">
                    <div class="form-group mb-0" style="width:400px; float:left">
                        <span style="width:100px;float:left;"> <label for="Form_C1_C2_No_" style="padding: .5rem .5rem 0 !important;">Reference No</label></span>
                        <span style="width:300px; float:left">
                            @Html.TextBoxFor(m => m.FormV3.RefId, new { @readonly = true, @class = "form-control", style = "width:300px;" })
                        </span>

                    </div>
                </div>
            </div>
            <div class="modal-body mh-182 pt-0 pb-0">
                <div class="col-lg-12">
                    <div class="w-100 bg-white pt-3" style="border-top:1px solid #dee2e6;">
                        <div id="accordion" class="col-lg-12">
                            <div class="accordion custom-accordion mb-3" id="custom-accordion-zero">
                                <div class="card mb-0">
                                    <div class="card-header" id="headingZero">
                                        <h5 class="m-0">
                                            <a class="custom-accordion-title py-1" data-toggle="collapse" href="#AccordPage0" aria-expanded="true" aria-controls="collapseZero">
                                                <span class="float-left">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#007bff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle after-collapsed d-none"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus-circle before-collapsed d-none"><circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                                </span>
                                                <span class="float-left" style="padding: 4px 8px;">
                                                    Form V3
                                                </span>
                                            </a>
                                        </h5>
                                    </div>
                                    <div id="AccordPage0" class="collapse show avowmodal-form formgrp-section" aria-labelledby="headingZero" data-parent="#custom-accordion-zero">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="form-group col-lg-10 col-md-12">
                                                    <div class="row">
                                                        <div class="col-lg-5">
                                                            <div class="row">
                                                                <div class="col-6 form-group pr-lg-0">
                                                                    <label for="RMU">RMU</label>
                                                                    @Html.DropDownListFor(Adtl => Adtl.FormV3.Rmu, (IEnumerable
    <SelectListItem>)ViewData["RMU"], "Select RMU", new { @Id = "ddlrmu", @class = "form-control validate {required, RMU}" })

                                                                </div>
                                                                <div class="form-group col-lg-6 mb-0">
                                                                    <label for="RMU_Name">RMU Name</label>
                                                                    @Html.TextBoxFor(m => m.FormV3.Rmuname, new { @Id = "ddlrmuDesc", @readonly = "readonly", @class = "form-control" })
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="col-lg-5">
                                                            <div class="row">
                                                                <div class="col-6 form-group px-0">
                                                                    <label for="RMU">Section Code</label>
                                                                    @Html.DropDownListFor(Ahdr => Ahdr.FormV3.SecCode, (IEnumerable<SelectListItem>)ViewData["SectionCodeList"], "Select Code", new { @Id = "ddlSecCode", @class = "form-control validate {required, Section Code}" })

                                                                </div>
                                                                <div class="form-group col-lg-6 mb-0">
                                                                    <label for="RMU_Name">Section Name</label>
                                                                    @Html.TextBoxFor(m => m.FormV3.Secname, new { @readonly = "readonly", @class = "form-control " })
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="col-2 form-group px-0">
                                                            <label for="RMU"> Division Code</label>
                                                            @Html.TextBoxFor(m => m.FormV3.DivCode, new { @readonly = "readonly", @class = "form-control " })
                                                        </div>
                                                        <div class="col-lg-5">

                                                            <div class="row">

                                                                <div class="form-group col-lg-6">
                                                                    <label for="Name_of_Crew_Supervisor">Crew</label>
                                                                    @Html.DropDownListFor(Ahdr => Ahdr.FormV3.Crew, (IEnumerable
    <SelectListItem>)ViewData["Supervisor"], "Select Users", new { @Id = "ddlCrew", @class = "form-control  validate {required, Name of Crew Supervisor}" })

                                                                </div>
                                                                <div class="form-group col-lg-6">
                                                                    <label for="Name_of_Crew_Supervisor">Crew Name</label>
                                                                    @Html.TextBoxFor(Dhdr => Dhdr.FormV3.Crewname, "", new { @readonly = "readonly", @class = "form-control" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-5">
                                                            <div class="row">
                                                                <div class="col-lg-6 form-group px-0">
                                                                    <label for="Ref_No_">Activity Code</label>
                                                                    @Html.DropDownListFor(Adtl => Adtl.FormV3.ActCode, (IEnumerable
    <SelectListItem>)ViewData["ActCode"], "Select Activity", new { @Id = "ddlActCode", @class = "form-control validate {required, Activity Code}" })

                                                                </div>
                                                                <div class="col-lg-6 form-group">
                                                                    <label for="Ref_No_">Activity Name</label>
                                                                    @Html.TextBoxFor(Dhdr => Dhdr.FormV3.Actname, "", new { @readonly = "readonly", @class = "form-control" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-2 form-group px-0">
                                                            <label for="Division_Code">Date </label>
                                                            @Html.EditorFor(m => m.FormV3.Dt, new { type = "date", htmlAttributes = new { @class = "form-control validate {required, Date}" } })
                                                        </div>
                                                        <div class="col-4 form-group">
                                                            <label for="Division_Code">V1 Reference no </label>
                                                            @Html.TextBoxFor(m => m.FormV3.FV1PKRefId, new { @readonly = "readonly", @class = "form-control", @width = "300px" })
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="form-group col-lg-2 col-md-12 pt-xl-4 px-md-4 px-sm-4">
                                                    <button id="btnFindDetails" type="button" onclick="Save('')" class="btn btn-sm btn-themebtn col-md-12 col-xl-12 col-lg-2 mr-lg-1 float-right">Find Details</button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion custom-accordion mb-3" id="custom-accordion-one">
                                <div class="card mb-0">
                                    <div class="card-header" id="headingOne">
                                        <h5 class="m-0">
                                            <a class="custom-accordion-title py-1 collapsed" data-toggle="collapse" href="#AccordPage1" aria-expanded="false" aria-controls="collapseOne">
                                                <span class="float-left">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#007bff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle after-collapsed d-none"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus-circle before-collapsed d-none"><circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                                </span>
                                                <span class="float-left" style="padding: 4px 8px;">
                                                    Work Accomplishment
                                                </span>
                                            </a>
                                        </h5>
                                    </div>
                                    <div id="AccordPage1" class="collapse avowmodal-form formgrp-section" aria-labelledby="headingOne" data-parent="#custom-accordion-one">
                                        <div class="card-body">
                                            @{
                                                Html.RenderPartial("_WorkAccomplishment.cshtml");
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion custom-accordion mb-4" id="custom-accordion-five">
                                <div class="card mb-0">
                                    <div class="card-header" id="headingFive">
                                        <h5 class="m-0">
                                            <a class="custom-accordion-title py-1 collapsed" data-toggle="collapse" href="#AccordPage5" aria-expanded="false" aria-controls="collapseFive">
                                                <span class="float-left">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#007bff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle after-collapsed d-none"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus-circle before-collapsed d-none"><circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                                                </span>
                                                <span class="float-left" style="padding: 4px 8px;">
                                                    User Details
                                                </span>
                                            </a>
                                        </h5>
                                    </div>
                                    <div id="AccordPage5" class="collapse avowmodal-form formgrp-section" aria-labelledby="headingFive" data-parent="#custom-accordion-five">
                                        <div class="card-body float-left p-0 w-100">
                                            <div class="row">
                                                <div class="col-lg-10 offset-lg-1 mt-2">
                                                    <div class="row" useridgroup="">


                                                        <div class="bg-white rounded landing-division w-100 float-left  my-2">
                                                            <div class="col-lg-12 border-bottom py-2 my-2">
                                                                <span class="font-14 font-weight-bold">
                                                                    Representative From
                                                                </span>
                                                            </div>
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="User_Id">
                                                                    Facilitator
                                                                </label>

                                                                <input type="text" class="form-control" readonly title="JKR Sarawak, Miri Division" value="JKR Sarawak, Miri Division" />
                                                            </div>
                                                            <div class="form-group col-lg-2">
                                                                <label for="Name">
                                                                    Facilitated by
                                                                </label>
                                                                @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["User"], "Facilitatedby", "Select Users", new { Id = "ddlFacilitatedby", @class = "form-control  {required,Facilitated by}", @onchange = "OnFacilitatedbyChange(this);" })

                                                            </div>
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="User_Id">
                                                                    Name
                                                                </label>
                                                                @Html.TextBoxFor(model => model.FormV3.UsernameFac, new { @readonly = true, @class = "form-control" })
                                                            </div>
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="Designation">Designation</label>
                                                                @Html.TextBoxFor(model => model.FormV3.DesignationFac, new { @readonly = true, @class = "form-control" })
                                                            </div>
                                                            <div class="form-group col-lg-3 float-left">
                                                                <label for="Date__DD-MM-YYYY_">Date (DD-MM-YYYY)</label>
                                                                @Html.EditorFor(m => m.FormV3.DtFac, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                            </div>
                                                            <div class="form-group col-lg-1 float-left">
                                                                <label>
                                                                    Sign
                                                                </label>
                                                                <div class="clear-b mt-2">
                                                                    @Html.CheckBoxFor(model => model.FormV3.SignFac, new { @class = "{required, Scheduled by Signature}" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="row">
                                                        <div class="bg-white rounded landing-division w-100 float-left  my-2" useridgroup="">
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="User_Id">
                                                                    Verifier
                                                                </label>
                                                                <input type="text" disabled class="form-control" title="JKR Sarawak, Miri Division" value="JKR Sarawak, Miri Division">
                                                            </div>
                                                            <div class="form-group col-lg-2 float-left mb-0">
                                                                <label for="Name">
                                                                    Recorded by
                                                                </label>
                                                                @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["User"], "Recordedby", "Select Users", new { Id = "ddlRecordedby", @class = "form-control  {required,Recorded by}", @onchange = "OnRecordedChange(this);" })
                                                            </div>

                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="User_Id">
                                                                    Name
                                                                </label>
                                                                @Html.TextBoxFor(model => model.FormV3.UsernameRec, new { @readonly = true, @class = "form-control" })
                                                            </div>
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="Designation">Designation</label>
                                                                @Html.TextBoxFor(model => model.FormV3.DesignationRec, new { @readonly = true, @class = "form-control" })
                                                            </div>
                                                            <div class="form-group col-lg-3 float-left">
                                                                <label for="Date__DD-MM-YYYY_">Date (DD-MM-YYYY)</label>
                                                                @Html.EditorFor(m => m.FormV3.DtRec, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                            </div>
                                                            <div class="form-group col-lg-1 float-left">
                                                                <label>
                                                                    Sign
                                                                </label>
                                                                <div class="clear-b mt-2">
                                                                    @Html.CheckBoxFor(model => model.FormV3.SignRec, new { @class = "{required, Recorded by Signature}" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="row">

                                                        <div class="bg-white rounded landing-division w-100 float-left  my-2" useridgroup="">
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="User_Id">
                                                                    Service Provider
                                                                </label>
                                                                <input type="text" disabled class="form-control" title="Endaya Construction Sdn Bhd" value="Endaya Construction Sdn Bhd">

                                                            </div>
                                                            <div class="form-group col-lg-2 float-left mb-0">
                                                                <label for="Name"> Agreed by<!--  Bansing Tijun--></label>
                                                                @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["User"], "Agreeedby", "Select Users", new { Id = "ddlAgreedby", @class = "form-control  {required,Agreed by}", @onchange = "OnAgreedbyChange(this);" })
                                                            </div>
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="User_Id">
                                                                    Name
                                                                </label>
                                                                @Html.TextBoxFor(model => model.FormV3.UsernameAgr, new { @readonly = true, @class = "form-control" })
                                                            </div>
                                                            <div class="form-group col-lg-2 float-left">
                                                                <label for="Designation">Designation</label>
                                                                @Html.TextBoxFor(model => model.FormV3.DesignationAgr, new { @readonly = true, @class = "form-control" })
                                                            </div>
                                                            <div class="form-group col-lg-3 float-left">
                                                                <label for="Date__DD-MM-YYYY_">Date (DD-MM-YYYY)</label>
                                                                @Html.EditorFor(m => m.FormV3.DtAgr, new { type = "date", htmlAttributes = new { @class = "form-control" } })
                                                            </div>
                                                            <div class="form-group col-lg-1 float-left">
                                                                <label>
                                                                    Sign
                                                                </label>
                                                                <div class="clear-b mt-2">
                                                                    @Html.CheckBoxFor(model => model.FormV3.SignAgr, new { @class = "{required, Agreed by Signature}" })
                                                                </div>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade" id="WorkAccompModal" role="dialog">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header">

                                            <h4 class="modal-title w-100 float-left">
                                                <span class="float-left">
                                                    Work Accomplishment

                                                </span>
                                                <button type="button" class="close float-right" data-dismiss="modal">&times;</button>
                                            </h4>
                                        </div>
                                        <div class="modal-body">

                                            <div class="row pt-3">

                                                <div class="form-group col-lg-6">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            @Html.Label("Road Code", "Road Code")
                                                            @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["RD_Code"], "RoadCode", "Select Road Code", new { id = "ddlRoadCode", @class = "form-control svalidate {required,Road Code}", @onchange = "OnRoadChange(this);" })

                                                        </div>
                                                        <div class="col-6">
                                                            @Html.Label("Road Name", "Road Name")
                                                            @Html.TextBoxFor(m => m.FormV3Dtl.RoadName, new { @readonly = true, @class = "form-control" })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-lg-3 p-0">
                                                    <label for="Chainage_From">
                                                        Chainage  From
                                                    </label>
                                                    <div class="row">
                                                        <div class="col-6 float-left pr-0">
                                                            @Html.TextBoxFor(m => m.FormV3Dtl.FrmCh, new { @maxlength = "6", @class = "form-control allow_numeric validate {required,Chainage KM from}", style = "height:35px" })
                                                        </div>
                                                        <div class="col-1 float-left p-0 text-center font-weight-bold lh30"> <label for="z">+</label></div>
                                                        <div class="col-5 float-left pl-0">
                                                            @Html.TextBoxFor(m => m.FormV3Dtl.FrmChDeci, new { @maxlength = "3", @class = "form-control allow_numeric validate {required,Chainage KM fromch}" })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-lg-3">
                                                    <label for="Chainage_From">
                                                        Chainage  To
                                                    </label>
                                                    <div class="row">
                                                        <div class="col-6 float-left pr-0">
                                                            @Html.TextBoxFor(m => m.FormV3Dtl.ToCh, new { @maxlength = "6", @class = "form-control allow_numeric validate {required,Chainage KM To}", style = "height:35px" })
                                                        </div>
                                                        <div class="col-1 float-left p-0 text-center font-weight-bold lh30"> <label for="z">+</label></div>
                                                        <div class="col-5 float-left pl-0">
                                                            @Html.TextBoxFor(m => m.FormV3Dtl.ToChDeci, new { @maxlength = "3", @class = "form-control allow_numeric validate {required,Chainage KM Toch}" })
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group col-lg-4">
                                                    <label for="Chainage_From">
                                                        Dimension
                                                    </label>
                                                    <div class="row">
                                                        <div class="col-6 float-left">

                                                            <div class="form-group in-lbl">
                                                                <label for="L">L</label>

                                                                @Html.TextBoxFor(m => m.FormV3Dtl.Length, new { @maxlength = "5", @class = "form-control allow_numeric validate {required,Length}", })
                                                            </div>
                                                        </div>
                                                        <div class="col-6 float-left pl-0">
                                                            <div class="form-group in-lbl">

                                                                <label for="W">W</label>
                                                                @Html.TextBoxFor(m => m.FormV3Dtl.Width, new { @maxlength = "5", @class = "form-control allow_numeric validate {required,Width}", })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-group col-2 p-0">
                                                    <label for="RoadCode">
                                                        ADP
                                                        (m2)
                                                    </label>
                                                    @Html.TextBoxFor(m => m.FormV3Dtl.Adp, new { @maxlength = "5", @class = "form-control allow_numeric validate {required, ADP}" })
                                                </div>
                                                <div class="form-group  col-3">
                                                    <label for="RoadCode">
                                                        Time Taken From
                                                    </label>
                                                    <div class="row">
                                                        <div class="col">
                                                            @Html.TextBoxFor(Adtl => Adtl.FormV3Dtl.TimetakenFrm, new { @type = "text", @autocomplete = "off", @class = "form-control  validate {required,Time Taken From }", @onchange = "CalTotalTime()", @rows = 1 })
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="form-group  col-3">
                                                    <label for="RoadCode">
                                                        Time Taken To
                                                    </label>
                                                    <div class="row">
                                                        <div class="col">
                                                            @Html.TextBoxFor(Adtl => Adtl.FormV3Dtl.TimeTakenTo, new { @type = "text", @autocomplete = "off", @class = "form-control  validate {required,Time Taken To }", @onchange = "CalTotalTime()", @rows = 1 })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-3">
                                                    <label for="RoadCode">
                                                        Total Time Taken
                                                    </label>
                                                    @Html.TextBoxFor(Adtl => Adtl.FormV3Dtl.TimeTakenTotal, new { @readonly = true, @class = "form-control" })
                                                </div>
                                                <div class="form-group  col-3">
                                                    <label for="RoadCode">
                                                        Transit Time From
                                                    </label>
                                                    <div class="row">
                                                        <div class="col">
                                                            @Html.TextBoxFor(Adtl => Adtl.FormV3Dtl.TransitTimeFrm, new { @type = "text", @autocomplete = "off", @class = "form-control  validate {required,Transit Time From }", @onchange = "CalTotalTransitTime()", @rows = 1 })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group  col-3">
                                                    <label for="RoadCode">
                                                        Transit Time To
                                                    </label>
                                                    <div class="row">
                                                        <div class="col">
                                                            @Html.TextBoxFor(Adtl => Adtl.FormV3Dtl.TransitTimeTo, new { @type = "text", @autocomplete = "off", @class = "form-control  validate {required,Transit Time To }", @onchange = "CalTotalTransitTime()", @rows = 1 })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-3">
                                                    <label for="RoadCode">
                                                        Total Transit Time
                                                    </label>
                                                    @Html.TextBoxFor(Adtl => Adtl.FormV3Dtl.TransitTimeTotal, new { @readonly = true, @class = "form-control" })
                                                </div>

                                            </div>


                                            <!--<div class="form-group col-lg-2 col-md-12 pt-xl-4 px-md-4 px-sm-4">
                                                <button id="btnFindDetails" type="button" class="btn btn-sm btn-themebtn col-md-12 col-xl-12 col-lg-2 mr-lg-1 float-right">Find Details</button>
                                            </div>-->

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-sm btn-outline-theme" data-dismiss="modal">Close</button>
                                            <button type="button" class="btn btn-sm btn-themebtn" id="saveFormV3DtlBtn" onclick="SaveFormV3Dtl()">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>




                        </div>

                    </div>
                </div>

                @{
                    if (Model.FormV3.Status != "" && Model.FormV3.Status != "Initialize")
                        Html.RenderPartial("~/Views/Shared/_ProcessHistory.cshtml", new RAMMS.DTO.RequestBO.ProcessDTO
                        {
                            Form = "FormV3",
                            RefId = Model.FormV3.PkRefNo,
                            Stage = Model.FormV3.Status
                        });
                }
            </div>



        </div>

        <div class="col-md-12 float-right text-right custom-footer">
            <button type="button" class="btn btn-sm btn-outline-theme" onclick="GoBack()">Cancel</button>
            @{



                <button id="saveFormV3Btn" type="button" class="btn btn-sm btn-themebtn" onclick="Save('Saved')">Save</button>


                @if (isSubmit)
                {
                    <button id="SubmitFormV3Btn" type="button" class="btn btn-sm btn-themebtn" onclick="Save('Submitted')">Submit</button>
                }

                @if (isSubmit && (Model.FormV3.Status == RAMMS.Common.StatusList.FormV1Submitted || Model.FormV3.Status == RAMMS.Common.StatusList.FormV1Rejected))
                {
                    <button type="button" class="btn btn-sm btn-themebtn enblmode" onclick="process.ShowApprove('@groupname','Verified By');"> Approved / Verify </button>
                }
                else if (IsApproved && (Model.FormV3.Status == RAMMS.Common.StatusList.FormV2Verified || Model.FormV3.Status == RAMMS.Common.StatusList.FormV2Rejected))
                {
                    <button type="button" class="btn btn-sm btn-themebtn enblmode" onclick="process.ShowApprove('@groupname', 'Approved By');"> Approved / Agreed </button>
                }

            }

        </div>
    </div>


    @Html.HiddenFor(m => m.FormV3.PkRefNo)
    @Html.HiddenFor(m => m.FormV3.Fv1PkRefNo)
    @Html.HiddenFor(m => m.FormV3.FV1PKRefId)
    @Html.HiddenFor(m => m.FormV3Dtl.PkRefNo)
    @Html.HiddenFor(m => m.FormV3.SecCode)
    @Html.HiddenFor(m => m.FormV3.UseridFac)
    @Html.HiddenFor(m => m.FormV3.UseridAgr)
    @Html.HiddenFor(m => m.FormV3.UseridRec)
    @Html.HiddenFor(m => m.FormV3.Status)
    @Html.HiddenFor(m => m.FormV3Dtl.RoadCode)
    @Html.HiddenFor(m => m.FormV3.SubmitSts)
    <input type="hidden" id="hdnSecCode" value="@Model.FormV3.SecCode" />
    <input type="hidden" id="hdnView" value="@Model.view" />
    <input type="text" id="CalculationTime" style="display:none" />
    <input type="text" id="CalculationTime1" style="display:none" />

}


<style>

    .custom-tbl div.dataTables_scrollHead table thead tr th:nth-child(4), .custom-tbl div.dataTables_scrollBody table tbody tr td:nth-child(4), .custom-tbl div.dataTables_scrollHead table thead tr th:nth-child(2), .custom-tbl div.dataTables_scrollBody table tbody tr td:nth-child(2), .custom-tbl div.dataTables_scrollHead table thead tr th:nth-child(3), .custom-tbl div.dataTables_scrollBody table tbody tr td:nth-child(3), .custom-tbl div.dataTables_scrollHead table thead tr th:nth-child(4), .custom-tbl div.dataTables_scrollBody table tbody tr td:nth-child(4), .custom-tbl div.dataTables_scrollHead table thead tr th:nth-child(5), .custom-tbl div.dataTables_scrollBody table tbody tr td:nth-child(5) {
        width: auto !important;
        min-width: auto !important;
    }
</style>


<script>

    var onloadFlag = true;

    $(document).ready(function () {
        process.Init("FormV3", "@Model.FormV3.Status", @Model.FormV3.PkRefNo);
        $("#FormV3Dtl_TimetakenFrm").timeEntry();
        $("#FormV3Dtl_TimeTakenTo").timeEntry();
        $("#FormV3Dtl_TransitTimeFrm").timeEntry();
        $("#FormV3Dtl_TransitTimeTo").timeEntry();
        $("#CalculationTime").timeEntry();
        $("#CalculationTime1").timeEntry();

    });



    $('#ddlrmu').val("@Model.FormV3.Rmu");
    $('#ddlrmu').trigger('chosen:updated');
    $('#ddlrmu').trigger("change");

    $('#dllSecCode').val("@Model.FormV3.SecCode");
    $('#dllSecCode').trigger('chosen:updated');
    $('#dllSecCode').trigger("change");

    $('#ddlActCode').val("@Model.FormV3.ActCode");
    $('#ddlActCode').trigger('chosen:updated');
    $('#ddlActCode').trigger("change");

    $('#ddlCrew').val("@Model.FormV3.Crew");
    $('#ddlCrew').trigger('chosen:updated');
    $('#ddlCrew').trigger("change");

    $('#ddlRecordedby').val("@Model.FormV3.UseridRec");
    $('#ddlRecordedby').trigger('chosen:updated');
    $('#ddlRecordedby').trigger("change");

    $('#ddlAgreedby').val("@Model.FormV3.UseridAgr");
    $('#ddlAgreedby').trigger('chosen:updated');
    $('#ddlAgreedby').trigger("change");

    $('#ddlFacilitatedby').val("@Model.FormV3.UseridFac");
    $('#ddlFacilitatedby').trigger('chosen:updated');
    $('#ddlFacilitatedby').trigger("change");


   // HeaderLogic();


</script>
