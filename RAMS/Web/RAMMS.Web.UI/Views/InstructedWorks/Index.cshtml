@model FormW2Model
@using RAMMS.Business.ServiceProvider;
@inject RAMMS.Business.ServiceProvider.Interfaces.ISecurity security;

@{
    ViewBag.TabTitle = "IW - Instructed Work";
    ViewData["Title"] = "IW - Instructed Work";
    Layout = "~/Views/Shared/_PortalLayout.cshtml";

    var isModifyPerm = security.IsPCModify(ModuleNameList.Instructed_Works) ? "" : "hidden";
    var isDeletePerm = security.IsPCDelete(ModuleNameList.Instructed_Works) ? "" : "hidden";
    var isAddPerm = security.IsPCAdd(ModuleNameList.Instructed_Works) ? "" : "hidden";
}
<script src="~/js/IWIndex.js" type="text/javascript"></script>
<style>
    .newadd-icon {
        background-size: 17px;
        height: 17px;
        float: left;
        width: 17px;
        margin-right: 8px;
        margin-left: 5px;
        margin-top: 2px;
    }

    .newadd-icon {
        background: url(../assets/media/color-add-icon.svg) no-repeat;
        position: relative;
    }
</style>
<div class="row">
    <div class="body-header w-100">
        <div class="col-lg-12">
            <div class="w-100 d-flex justify-content-md-between py-2 align-items-center">
                <span class="mb-0 font-weight-bold font-20">
                    Instructed Work
                </span>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb breadcrumb-alt mb-0 bg-transparent">
                        <li class="breadcrumb-item">Home</li>
                        <li class="breadcrumb-item">
                            Instructed Work
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="search-section">
            <div class="justify-content-center mb-1">
                <div class="search-content">
                    <div class="input-group">
                        @Html.TextBoxFor(m => m.SearchObj.SmartInputValue, new { @Id = "txtSmartSearch", @autocomplete = "off", placeholder = "Search...", @class = "form-control", @value = "", @spellcheck = "false", @readonly = "true", @onfocus = "this.removeAttribute('readonly')" })
                        <div class="input-group-append">
                            <div class="btn-group">
                                <button id="btnSearch" type="button" class="bg-theme-color js-tooltip-enabled px-2 border-0" style="line-height: 18px;"><span class="search-icon"></span></button>
                                <button id="btnAdvSearch" type="button" class="bg-theme-color js-tooltip-enabled px-3 border-0" data-toggle="collapse" data-target="#div_advsearch"><span class="filter-icon"></span></button>
                                <button id="btnClearSearch" type="button" onclick="clearHeaderSearch()" class="bg-theme-color js-tooltip-enabled px-3 border-0 rounded-right">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="div_advsearch" class="collapse">
                    <div class="row">
                        <div class="col-lg-10 offset-lg-1">
                            <div class="bg-white rounded float-left pt-3 pb-1 px-lg-3 px-md-2 advance-search-group w-100">
                                <div class="form-group">
                                    <label for="IW_Reference">IW Reference No.</label>
                                    <input class="form-control" type="text" id="txtIWRefNo">
                                </div>
                                <div class="form-group">
                                    <label for="C_Date">Commencement Date From</label>
                                    <input class="form-control" type="date" id="txtCommenceDtFrom">
                                </div>
                                <div class="form-group">
                                    <label for="C_Date">Commencement Date To</label>
                                    <input class="form-control" type="date" id="txtCommenceDtTo">
                                </div>
                                <div class="form-group">
                                    <label for="C_Date">Project Title</label>
                                    <input class="form-control" type="text" id="txtProjectTitle">
                                </div>
                                <div class="form-group">
                                    <label for="C_Date">Status</label>
                                    @Html.DropDownList("txtStatus",(IEnumerable<SelectListItem>)ViewData["TECM_Status"],  "Select Status", new { @id = "txtStatus", @class = "form-control" })
                                </div>
                                <div class="form-group  col-lg-2">
                                    <label for="status_percentage">Status Percentage From</label>
                                    <input class="form-control allow_numeric" type="text" id="txtStPercFrom" maxlength="6" onchange="return PercentangeChange(this)">
                                </div>

                                <div class="form-group  col-lg-2">
                                    <label for="status_percentage">Status Percentage To</label>
                                    <input class="form-control allow_numeric" type="text" id="txtStPercTo" maxlength="6" onchange="return PercentangeChange(this)">
                                </div>

                                <div class="form-group  col-lg-2">
                                    @Html.Label("RMU", "RMU")
                                    @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["RMU"], "RMU", "Select RMU", new { @id = "txtRmu", @class = "form-control", @onchange = "changeRMU(this)" })
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("RMU Name", "RMU Name")
                                    <input type="text" class="form-control" id="txtRmuName" disabled />
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("Road Code", "Road Code")
                                    @Html.DropDownList((IEnumerable<CSelectListItem>)ViewData["RD_Code"], "RoadCode", "Select Road Code", new { @id = "txtRoadCode", @class = "form-control", @onchange = "OnRoadChange(this);" })
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("Road Name", "Road Name")
                                    <input type="text" class="form-control" id="txtRoadName" disabled />
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("Recommendation by DE", "Recommendation by DE")
                                    @Html.DropDownList("IWBYDE", (IEnumerable<SelectListItem>)ViewData["IWBYDE"],  "Select Recommendation", new { @id = "txtDEYN", @class = "form-control" })
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("Form Type", "Form Type")
                                    @Html.DropDownList("IWFormType",(IEnumerable<SelectListItem>)ViewData["IWFormType"],  "Select Form Type", new { @id = "txtFormType", @class = "form-control" })
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("TECM", "TECM")
                                    @Html.DropDownList("TECM", (IEnumerable<SelectListItem>)ViewData["IWTECM"], "Select TECM", new { @id = "txtTECM", @class = "form-control"})
                                </div>
                                <div class="form-group col-lg-2">
                                    @Html.Label("FECM", "FECM")
                                    @Html.DropDownList("FECM",(IEnumerable<SelectListItem>)ViewData["IWFECM"],  "Select FECM", new { @id = "txtFECM", @class = "form-control"})
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Container -->
<div class="row">
    <div class="col-12">
        <div class="text-right">
            <div class="btn-group dropbottom" id="actiondropdown">
                <button id="actionclick" type="button" class="btn btn-sm btn-themebtn dropdown-toggle font-12" data-toggle="dropdown" aria-expanded="false">
                    PROPOSED IW
                </button>
                <div class="dropdown-menu">
                    <button type="button" class="dropdown-item editdel-btns  py-1 px-1" id="w1Add" data-toggle="modal" onclick="OpenFormW1('Add')">
                        <span class="newadd-icon"></span> Add W1
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w1Edit" data-toggle="modal" onclick="OpenFormW1('Edit')">
                        <span class="edit-icon"></span>View / Edit W1
                    </button>

                    @* <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w1View" data-toggle="modal" onclick="OpenFormW1('View',1)">
                        <span class="view-icon"></span> View
                        </button>*@
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w1Delete" onclick="DeleteW1()">
                        <span class="del-icon"></span> Delete W1
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w1Print" onclick="PrintFormW1()">
                        <span class="print-icon"></span> Print W1
                    </button>
                </div>
            </div>
            <div class="btn-group dropbottom" id="actiondropdown">
                <button id="actionclick" type="button" class="btn btn-sm btn-themebtn dropdown-toggle font-12" data-toggle="dropdown" aria-expanded="false">
                    IW TECM & FECM
                </button>
                <div class="dropdown-menu">
                    <button type="button" class="dropdown-item editdel-btns  py-1 px-1" id="w2Add" data-toggle="modal" onclick="OpenFormW2('Add')">
                        <span class="newadd-icon"></span> Add W2
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w2Edit" data-toggle="modal" onclick="OpenFormW2('Edit')">
                        <span class="edit-icon"></span>   View / Edit W2
                    </button>
                    @* <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w2View" data-toggle="modal" data-target="#formW2" onclick="OpenFormW2('View',1)">
                        <span class="view-icon"></span> View
                        </button>*@
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="w2Delete" onclick="DeleteW2()">
                        <span class="del-icon"></span> Delete W2
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top  py-1 px-1" id="w2Print" onclick="PrintFormW2()">
                        <span class="print-icon"></span> Print W2
                    </button>
                </div>
            </div>
            <div class="btn-group dropbottom" id="actiondropdown">
                <button id="actionclick" type="button" class="btn btn-sm btn-themebtn dropdown-toggle font-12" data-toggle="dropdown" aria-expanded="false">
                    EOT / LAD
                </button>
                <div class="dropdown-menu">
                    <button type="button" class="dropdown-item editdel-btns  py-1 px-1" id="wdAdd" onclick="OpenFormWDWN('Add','FormWD')">
                        <span class="newadd-icon"></span> Add WD
                    </button>

                    <button type="button" class="dropdown-item editdel-btns  py-1 px-1" id="wdAdd" onclick="OpenFormWDWN('Add','FormWN')">
                        <span class="newadd-icon"></span> Add WN
                    </button>

                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="wdEdit" onclick="OpenFormWDWN('Edit','FormWD')">
                        <span class="edit-icon"></span>   View / Edit WD
                    </button>

                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wdEdit" onclick="OpenFormWDWN('Edit','FormWN')">
                        <span class="edit-icon"></span>   View / Edit WN
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="wdDelete" onclick="DeleteWDWN('FormWD')">
                        <span class="del-icon"></span> Delete WD
                    </button>
                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wnDelete" onclick="DeleteWDWN('FormWN')">
                        <span class="del-icon"></span> Delete WN
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="wdPrint" onclick="PrintFormWDWN('FormWD')">
                        <span class="print-icon"></span> Print WD
                    </button>
                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wnPrint" onclick="PrintFormWDWN('FormWN')">
                        <span class="print-icon"></span> Print WN
                    </button>
                    @*</div>*@
                </div>
            </div>
            <div class="btn-group dropbottom" id="actiondropdown">
                <button id="actionclick" type="button" class="btn btn-sm btn-themebtn dropdown-toggle font-12" data-toggle="dropdown" aria-expanded="false">
                    COMPLETED IW
                </button>
                <div class="dropdown-menu">
                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wcAdd" onclick="OpenFormWCWG('Add','FormWC')">
                        <span class="newadd-icon"></span> Add WC
                    </button>
                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wgAdd" onclick="OpenFormWCWG('Add','FormWG')">
                        <span class="newadd-icon"></span> Add WG
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="wcEdit" onclick="OpenFormWCWG('Edit','FormWC')">
                        <span class="edit-icon"></span>  View / Edit WC
                    </button>

                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wgEdit" onclick="OpenFormWCWG('Edit','FormWG')">
                        <span class="view-icon"></span> View / Edit WG
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="wcDelete" onclick="DeleteWCWG('FormWC')">
                        <span class="del-icon"></span> Delete WC
                    </button>
                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wgDelete" onclick="DeleteWCWG('FormWG')">
                        <span class="del-icon"></span> Delete WG
                    </button>
                    <button type="button" class="dropdown-item editdel-btns border-top py-1 px-1" id="wcPrint" onclick="PrintFormWCWG('FormWC')">
                        <span class="print-icon"></span> Print WC
                    </button>
                    <button type="button" class="dropdown-item editdel-btns py-1 px-1" id="wgPrint" onclick="PrintFormWCWG('FormWG')">
                        <span class="print-icon"></span> Print WG
                    </button>
                </div>
            </div>
            <div class="panel with-nav-tabs panel-default">
                <div class="panel-heading float-right mb-2">
                </div>
                <div class="panel-body">
                    <div class="tab-content">
                        <!-- Other panes here -->
                        <div class="py-2">

                            <div class="w-100 float-left position-relative">
                                <div class="w-100 dt-tbl-section">
                                    <div class="main-container">
                                        <div>
                                            <div class="dataTables_wrapper dt-bootstrap4 no-footer">
                                                <div class="top p-1">
                                                    @*Pagination will come here*@
                                                </div>
                                                <main id="main-container" class="row">
                                                    <div class="col-lg-12">
                                                        <div class="w-100 float-left position-relative">
                                                            @*Form IW Grid*@
                                                            <div id="headerListGrid" class="w-100 dt-tbl-section">
                                                                @{
                                                                    Html.RenderPartial("_HeaderListGrid.cshtml");
                                                                }
                                                            </div>

                                                        </div>
                                                    </div>
                                                </main>

                                                <div class="bottom d-flex justify-content-md-between">
                                                    @*Data Tables Info*@

                                                </div><div class="clear"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<input type="hidden" id="hdnHasRights" value="@ViewData["IWRights"]" />
<input type="hidden" id="hdnRole" value='@ViewData["Groups"]' />
<input type="hidden" id="hdnAdd" value='@isAddPerm' />
<input type="hidden" id="hdnModify" value='@isModifyPerm' />
<input type="hidden" id="hdnDelete" value='@isDeletePerm' />

<div class="modal fade" id="formW1" role="dialog">
    <div class="modal-dialog modal-dialog modal-dialog-centered modal-custom">
        <div class="modal-content mt-5">
            <div class="modal-header mt-5">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body" id="formW1Content">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div class="modal fade" id="formW2" role="dialog">
    <div class="modal-dialog modal-dialog modal-dialog-centered modal-custom">
        <div class="modal-content mt-5">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body" id="formW2Content">
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="formWCWG" role="dialog">
    <div class="modal-dialog modal-dialog modal-dialog-centered modal-custom">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body" id="formWCWGContent">
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="formWDWN" role="dialog">
    <div class="modal-dialog modal-dialog modal-dialog-centered modal-custom">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body" id="formWDWNContent">
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>